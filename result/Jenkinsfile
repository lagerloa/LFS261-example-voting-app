pipeline{
  agent any
 
  stages{
      stage("build"){
        when{
           changeset "**/result/**"
        }
        steps{
           echo 'Installing result app..'
           dir('result'){
          }
        }
      }

      stage("test"){
        when{
           changeset "**/result/**"
        }
        steps{
           echo 'Running tests on result app..'
           dir('result'){
           }
        }

      }

  }

  post{
    always{
        echo 'Building multibranch pipeline for result app is completed..'
    }
    failure{
         slackSend (channel: "#ci-cd", message: "Build Failed: ${env.JOB_NAME} ${env.BUILD_NUMBER}")
    }
    success{
         slackSend (channel: "#ci-cd", message: "Build Success: ${env.JOB_NAME} ${env.BUILD_NUMBER}")

    } 
  }


}
